rules_version='2'

service cloud.firestore {
  match /databases/{database}/documents {
    // Reglas para insumos: solo el usuario que los creó puede acceder
    match /insumos/{insumoId} {
      allow read, write: if request.auth != null && request.auth.uid == resource.data.userId;
      allow create: if request.auth != null && request.auth.uid == request.resource.data.userId;
    }
    
    // Reglas para colmenas: solo el usuario que las creó puede acceder
    match /colmenas/{colmenaId} {
      allow read, write: if request.auth != null && request.auth.uid == resource.data.userId;
      allow create: if request.auth != null && request.auth.uid == request.resource.data.userId;
    }
    
    // Reglas para cosechas: solo el usuario que las creó puede acceder
    match /cosechas/{cosechaId} {
      allow read, write: if request.auth != null && request.auth.uid == resource.data.userId;
      allow create: if request.auth != null && request.auth.uid == request.resource.data.userId;
    }
    
    // Reglas para alerts: solo el usuario propietario puede acceder
    match /alerts/{alertId} {
      allow read, write: if request.auth != null && request.auth.uid == resource.data.userId;
      allow create: if request.auth != null && request.auth.uid == request.resource.data.userId;
    }
  }
}
